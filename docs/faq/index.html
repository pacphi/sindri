<!DOCTYPE html>
<!--
  Sindri FAQ - Self-contained build
  Generated: 2026-01-15T19:08:59.920Z
  Questions: 77
  Categories: 8

  This file is auto-generated. Edit source files in src/ directory.
  Rebuild with: pnpm build:faq
-->

<html lang="en" class="scroll-smooth">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sindri FAQ - Frequently Asked Questions</title>
  <meta name="description" content="Comprehensive FAQ for Sindri - the declarative, provider-agnostic cloud development environment system">

  <!-- Tailwind CSS 4 via CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Anime-style fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@300;400;500;700;800&family=Zen+Maru+Gothic:wght@300;400;500;700;900&display=swap" rel="stylesheet">

  <!-- Custom Tailwind Config -->
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          fontFamily: {
            'anime': ['"M PLUS Rounded 1c"', '"Zen Maru Gothic"', 'system-ui', 'sans-serif'],
            'anime-bold': ['"Zen Maru Gothic"', '"M PLUS Rounded 1c"', 'system-ui', 'sans-serif'],
          },
          colors: {
            'sindri': {
              50: '#f0f9ff',
              100: '#e0f2fe',
              200: '#bae6fd',
              300: '#7dd3fc',
              400: '#38bdf8',
              500: '#0ea5e9',
              600: '#0284c7',
              700: '#0369a1',
              800: '#075985',
              900: '#0c4a6e',
              950: '#082f49',
            },
            'sakura': {
              50: '#fdf2f8',
              100: '#fce7f3',
              200: '#fbcfe8',
              300: '#f9a8d4',
              400: '#f472b6',
              500: '#ec4899',
              600: '#db2777',
              700: '#be185d',
              800: '#9d174d',
              900: '#831843',
            }
          },
          animation: {
            'bounce-slow': 'bounce 2s infinite',
            'pulse-slow': 'pulse 3s infinite',
            'fade-in': 'fadeIn 0.3s ease-out',
            'slide-down': 'slideDown 0.3s ease-out',
          },
          keyframes: {
            fadeIn: {
              '0%': { opacity: '0', transform: 'translateY(-10px)' },
              '100%': { opacity: '1', transform: 'translateY(0)' },
            },
            slideDown: {
              '0%': { opacity: '0', maxHeight: '0' },
              '100%': { opacity: '1', maxHeight: '500px' },
            }
          }
        }
      }
    }
  </script>

  <!-- Custom Styles -->
  <style>
    /* Anime-style text rendering */
    .font-anime {
      font-family: "M PLUS Rounded 1c", "Zen Maru Gothic", system-ui, sans-serif;
      font-feature-settings: "palt";
      -webkit-font-smoothing: antialiased;
    }

    /* Smooth accordion transitions */
    .accordion-content {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.3s ease-out, opacity 0.3s ease-out, padding 0.3s ease-out;
      opacity: 0;
    }

    .accordion-content.open {
      max-height: 1000px;
      opacity: 1;
    }

    /* Custom scrollbar */
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }

    ::-webkit-scrollbar-track {
      background: transparent;
    }

    ::-webkit-scrollbar-thumb {
      background: #cbd5e1;
      border-radius: 4px;
    }

    .dark ::-webkit-scrollbar-thumb {
      background: #475569;
    }

    /* Search highlight */
    .highlight {
      background: linear-gradient(120deg, #fef08a 0%, #fde047 100%);
      border-radius: 2px;
      padding: 0 2px;
    }

    .dark .highlight {
      background: linear-gradient(120deg, #854d0e 0%, #a16207 100%);
      color: #fef9c3;
    }

    /* Glassmorphism effect */
    .glass {
      background: rgba(255, 255, 255, 0.7);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }

    .dark .glass {
      background: rgba(15, 23, 42, 0.7);
    }

    /* Category badge colors */
    .badge-getting-started { @apply bg-emerald-100 text-emerald-800 dark:bg-emerald-900/50 dark:text-emerald-300; }
    .badge-configuration { @apply bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300; }
    .badge-deployment { @apply bg-purple-100 text-purple-800 dark:bg-purple-900/50 dark:text-purple-300; }
    .badge-extensions { @apply bg-orange-100 text-orange-800 dark:bg-orange-900/50 dark:text-orange-300; }
    .badge-secrets { @apply bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300; }
    .badge-troubleshooting { @apply bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300; }
    .badge-architecture { @apply bg-indigo-100 text-indigo-800 dark:bg-indigo-900/50 dark:text-indigo-300; }
    .badge-cicd { @apply bg-cyan-100 text-cyan-800 dark:bg-cyan-900/50 dark:text-cyan-300; }

    /* Focus styles */
    .faq-item:focus-within {
      outline: 2px solid #0ea5e9;
      outline-offset: 2px;
    }

    /* Print styles */
    @media print {
      .no-print { display: none !important; }
      .accordion-content { max-height: none !important; opacity: 1 !important; }
    }
  </style>
</head>

<body class="font-anime bg-gradient-to-br from-slate-50 via-white to-sindri-50 dark:from-slate-950 dark:via-slate-900 dark:to-slate-950 min-h-screen transition-colors duration-300">

  <!-- Header -->
  <header class="sticky top-0 z-50 glass border-b border-slate-200/50 dark:border-slate-700/50 no-print">
    <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex items-center justify-between h-16">
        <!-- Title -->
        <h1 class="text-xl font-bold text-slate-900 dark:text-white font-anime-bold tracking-tight">
          Sindri FAQ
        </h1>

        <!-- Actions -->
        <div class="flex items-center gap-2 sm:gap-4">
          <!-- GitHub Link -->
          <a href="https://github.com/pacphi/sindri" target="_blank" rel="noopener noreferrer"
             class="p-2 rounded-lg text-slate-600 hover:text-slate-900 dark:text-slate-400 dark:hover:text-white hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors"
             title="View on GitHub">
            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z"/>
            </svg>
          </a>

          <!-- Theme Toggle -->
          <button id="theme-toggle"
                  class="p-2 rounded-lg text-slate-600 hover:text-slate-900 dark:text-slate-400 dark:hover:text-white hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors"
                  title="Toggle theme">
            <svg id="theme-icon-light" class="w-5 h-5 hidden dark:block" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"/>
            </svg>
            <svg id="theme-icon-dark" class="w-5 h-5 block dark:hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"/>
            </svg>
          </button>
        </div>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8 sm:py-12">

    <!-- Hero Section -->
    <section class="text-center mb-10 sm:mb-14">
      <h2 class="text-3xl sm:text-4xl lg:text-5xl font-bold font-anime-bold text-slate-900 dark:text-white mb-4 tracking-tight">
        <span class="bg-gradient-to-r from-sindri-600 via-sindri-500 to-sakura-500 bg-clip-text text-transparent">
          How can we help?
        </span>
      </h2>
      <p class="text-lg sm:text-xl text-slate-600 dark:text-slate-400 max-w-2xl mx-auto font-light">
        Find answers to common questions about Sindri's deployment, configuration, extensions, and more.
      </p>
    </section>

    <!-- Search Section -->
    <section class="mb-8 sm:mb-10 no-print">
      <div class="relative max-w-2xl mx-auto">
        <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
          <svg class="w-5 h-5 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
          </svg>
        </div>
        <input type="text"
               id="search-input"
               placeholder="Search questions... (e.g., 'deploy', 'extension', 'secrets')"
               class="w-full pl-12 pr-12 py-4 text-lg rounded-2xl border-2 border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800/50 text-slate-900 dark:text-white placeholder-slate-400 focus:border-sindri-500 dark:focus:border-sindri-400 focus:ring-4 focus:ring-sindri-500/20 outline-none transition-all shadow-lg shadow-slate-200/50 dark:shadow-slate-900/50"
               autocomplete="off">
        <button id="clear-search"
                class="absolute inset-y-0 right-0 pr-4 flex items-center text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 hidden"
                title="Clear search">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </button>
      </div>
      <div id="search-stats" class="text-center mt-3 text-sm text-slate-500 dark:text-slate-400 hidden">
        <span id="result-count">0</span> results found
      </div>
    </section>

    <!-- Category Filter Pills -->
    <section class="mb-8 no-print">
      <div id="category-filters" class="flex flex-wrap justify-center gap-2">
        <button data-category="all"
                class="category-pill active px-4 py-2 rounded-full text-sm font-medium transition-all bg-sindri-500 text-white shadow-lg shadow-sindri-500/25">
          All Categories
        </button>
        <!-- Category pills will be dynamically inserted here -->
      </div>
    </section>

    <!-- FAQ List -->
    <section id="faq-container" class="space-y-4">
      <!-- FAQ items will be dynamically inserted here -->
      <div id="loading" class="text-center py-12">
        <div class="inline-flex items-center gap-3 text-slate-500 dark:text-slate-400">
          <svg class="w-6 h-6 animate-spin" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
          </svg>
          <span class="font-medium">Loading FAQ...</span>
        </div>
      </div>
    </section>

    <!-- No Results Message -->
    <section id="no-results" class="hidden text-center py-12">
      <div class="inline-flex flex-col items-center gap-4">
        <div class="w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-800 flex items-center justify-center">
          <svg class="w-8 h-8 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
          </svg>
        </div>
        <div>
          <h3 class="text-lg font-semibold text-slate-900 dark:text-white mb-1">No results found</h3>
          <p class="text-slate-500 dark:text-slate-400">Try adjusting your search or browse all categories</p>
        </div>
        <button id="reset-search" class="px-4 py-2 bg-sindri-500 text-white rounded-lg hover:bg-sindri-600 transition-colors">
          Show all questions
        </button>
      </div>
    </section>

  </main>

  <!-- Footer -->
  <footer class="border-t border-slate-200 dark:border-slate-800 mt-16 py-8 no-print">
    <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex flex-col sm:flex-row items-center justify-between gap-4">
        <div class="text-sm text-slate-500 dark:text-slate-400">
          <span class="font-medium">Sindri</span> - Declarative Cloud Development Environments
        </div>
        <div class="flex items-center gap-6 text-sm">
          <a href="https://github.com/pacphi/sindri/blob/main/docs/QUICKSTART.md"
             class="text-slate-500 hover:text-sindri-600 dark:text-slate-400 dark:hover:text-sindri-400 transition-colors">
            Quick Start
          </a>
          <a href="https://github.com/pacphi/sindri/blob/main/docs/CONFIGURATION.md"
             class="text-slate-500 hover:text-sindri-600 dark:text-slate-400 dark:hover:text-sindri-400 transition-colors">
            Configuration
          </a>
          <a href="https://github.com/pacphi/sindri/issues"
             class="text-slate-500 hover:text-sindri-600 dark:text-slate-400 dark:hover:text-sindri-400 transition-colors">
            Report Issue
          </a>
        </div>
      </div>
    </div>
  </footer>

  <!-- FAQ JavaScript -->
  <script>
// Embedded FAQ Data (generated by build.mjs)
window.FAQ_DATA = {"categories":[{"id":"getting-started","name":"Getting Started","icon":"rocket","description":"Setup, prerequisites, and first steps"},{"id":"configuration","name":"Configuration","icon":"cog","description":"sindri.yaml, profiles, and settings"},{"id":"deployment","name":"Deployment","icon":"cloud","description":"Docker, Fly.io, DevPod, and Kubernetes"},{"id":"extensions","name":"Extensions","icon":"puzzle","description":"Installing, managing, and creating extensions"},{"id":"secrets","name":"Secrets Management","icon":"key","description":"Environment variables, Vault, and files"},{"id":"troubleshooting","name":"Troubleshooting","icon":"wrench","description":"Common errors and debugging"},{"id":"architecture","name":"Architecture","icon":"layers","description":"How Sindri works under the hood"},{"id":"cicd","name":"CI/CD & Automation","icon":"refresh","description":"GitHub Actions and automation"}],"questions":[{"id":"what-is-sindri","category":"getting-started","question":"What is Sindri?","answer":"Sindri is a declarative, provider-agnostic cloud development environment system. It uses YAML-defined extensions and optimized Docker images to deploy consistent development environments to Fly.io, local Docker, or via DevPod to Kubernetes, AWS, GCP, Azure, and other cloud providers. The core design principles are YAML-first architecture, provider agnosticism, immutable/mutable split for system files, and fast startup times.","tags":["overview","introduction","basics"],"docs":["README.md","docs/ARCHITECTURE.md"]},{"id":"prerequisites","category":"getting-started","question":"What are the prerequisites for using Sindri?","answer":"The core prerequisites are: Docker installed, yq installed (brew install yq on macOS or download from GitHub). For Fly.io deployments, you need flyctl installed. For DevPod deployments, you need the DevPod CLI installed. Optional tools include pnpm for running validation and tests.","tags":["setup","requirements","installation"],"docs":["docs/QUICKSTART.md"]},{"id":"quick-start","category":"getting-started","question":"How do I get started with Sindri quickly?","answer":"Clone the repository (git clone https://github.com/pacphi/sindri), make the CLI executable (chmod +x cli/sindri), initialize configuration (sindri config init), edit sindri.yaml to your needs, then deploy with 'sindri deploy'. For local development, use '--provider docker'. The whole process takes less than 5 minutes.","tags":["quickstart","tutorial","beginner"],"docs":["docs/QUICKSTART.md"]},{"id":"first-deploy","category":"getting-started","question":"What happens during my first deployment?","answer":"During first deployment, Sindri validates your configuration, builds or pulls the Docker image, deploys using the provider-specific adapter (Docker Compose, flyctl, or devpod), initializes the persistent volume with the home directory structure, sets up SSH authorized keys, configures Git user settings, and starts the SSH daemon (unless in CI mode). The environment is then ready for use.","tags":["deploy","first-time","initialization"],"docs":["docs/DEPLOYMENT.md"]},{"id":"supported-providers","category":"getting-started","question":"Which cloud providers does Sindri support?","answer":"Sindri supports three primary deployment providers: Docker (local development), Fly.io (cloud with auto-suspend), and DevPod (IDE-integrated). DevPod is a meta-provider that supports multiple backends including local Docker, AWS EC2, GCP Compute, Azure VMs, DigitalOcean Droplets, Kubernetes pods, and any SSH host. This makes Sindri truly provider-agnostic.","tags":["providers","cloud","deployment"],"docs":["docs/DEPLOYMENT.md","docs/providers/"]},{"id":"what-is-e2b","category":"getting-started","question":"What is E2B and when should I use it?","answer":"E2B is a cloud platform optimized for AI-generated code execution with ultra-fast startup times (~150ms). It's best for AI agent code execution, rapid prototyping, CI/CD testing with ephemeral environments, and remote work through corporate firewalls (uses WebSocket over HTTPS instead of SSH). Unlike traditional providers, E2B uses pause/resume snapshots instead of persistent volumes, with per-second billing that can significantly reduce costs. Use Docker for local development, Fly.io for GPU workloads or long-running servers, DevPod for VS Code integration, and E2B for AI sandboxes requiring fast iteration.","tags":["e2b","overview","providers","cloud","ai"],"docs":["docs/providers/E2B.md","docs/DEPLOYMENT.md"]},{"id":"config-init","category":"configuration","question":"How do I create a sindri.yaml configuration file?","answer":"Run 'sindri config init' to generate a template sindri.yaml with sensible defaults. This creates a file with version, name, deployment settings (provider, resources, volumes), extensions configuration, and provider-specific options. You can then customize it for your needs. Always validate with 'sindri config validate' after making changes.","tags":["config","yaml","setup"],"docs":["docs/CONFIGURATION.md","docs/CLI.md"]},{"id":"config-validation","category":"configuration","question":"How do I validate my sindri.yaml configuration?","answer":"Run 'sindri config validate' to validate your configuration against the JSON schema. This checks for required fields, correct types, valid provider names, and proper structure. The schema is located at docker/lib/schemas/sindri.schema.json. Exit code 0 means valid, exit code 1 means validation failed with errors displayed.","tags":["validation","schema","config"],"docs":["docs/CONFIGURATION.md","docs/SCHEMA.md"]},{"id":"profiles-vs-extensions","category":"configuration","question":"What's the difference between profiles and individual extensions?","answer":"Profiles are pre-configured bundles of extensions for common workflows (e.g., 'fullstack' includes nodejs, python, docker, nodejs-devtools). Individual extensions let you pick exactly what you need. You can use a profile as a base and add additional extensions on top. In sindri.yaml, use 'extensions.profile' for a bundle or 'extensions.active' for individual selections.","tags":["profiles","extensions","bundles"],"docs":["docs/EXTENSIONS.md","docs/CONFIGURATION.md"]},{"id":"available-profiles","category":"configuration","question":"What extension profiles are available?","answer":"Available profiles include: minimal (nodejs, python), fullstack (nodejs, python, docker, nodejs-devtools), ai-dev (nodejs, python, golang, ollama, ai-toolkit, mdflow, openskills, supabase-cli, linear-mcp, monitoring), anthropic-dev (comprehensive Claude/AI toolset with 21 extensions), systems (rust, golang, docker, infra-tools), enterprise (all languages and infrastructure), devops (docker, infra-tools, cloud-tools, monitoring), and mobile (nodejs).","tags":["profiles","list","options"],"docs":["docs/EXTENSIONS.md","docker/lib/profiles.yaml"]},{"id":"resource-allocation","category":"configuration","question":"How do I configure memory and CPU resources?","answer":"In sindri.yaml, set deployment.resources.memory (e.g., '2GB', '4GB') and deployment.resources.cpus (e.g., 1, 2). For Fly.io, memory tiers map to specific VM sizes: 1GB (~$5-10/mo), 2GB (~$10-15/mo), 4GB (~$30-40/mo). You can also set cpuKind to 'shared' (cheaper) or 'performance' (dedicated CPU) for Fly.io.","tags":["resources","memory","cpu","sizing"],"docs":["docs/CONFIGURATION.md"]},{"id":"volume-size","category":"configuration","question":"How do I configure persistent volume size?","answer":"Set deployment.volumes.workspace.size in sindri.yaml (e.g., '10GB', '30GB', '100GB'). This is the persistent storage for your home directory, workspace, and installed tools. For Fly.io, costs are approximately $1.50/month for 10GB, $4.50/month for 30GB, and $15/month for 100GB. The volume persists across container restarts.","tags":["volumes","storage","persistence"],"docs":["docs/CONFIGURATION.md"]},{"id":"backup-profiles","category":"configuration","question":"What backup profiles are available and which should I use?","answer":"Three profiles: 'user-data' (100MB-1GB, includes projects/, scripts/, .claude/, .ssh/host_keys/ - use for migrating to new instances), 'standard' (adds shell configs like .bashrc, .gitconfig, app configs - recommended default), and 'full' (largest, includes all configs and .local/bin/ but excludes caches and regenerable mise installs - use for complete disaster recovery). Never backup .cache/, mise installs (regenerable), or system markers (.initialized, bootstrap.yaml) as these break fresh deployments. Use 'sindri restore --mode safe' (default, never overwrites) or '--mode merge' (backs up conflicts before restoring).","tags":["backup","profiles","configuration","restore"],"docs":["docs/BACKUP_RESTORE.md","docs/CONFIGURATION.md"]},{"id":"deploy-idempotent","category":"deployment","question":"Is 'sindri deploy' idempotent? Can I re-run it after making changes?","answer":"Yes, sindri deploy is designed to be re-runnable. Fly.io is most idempotent (~95%) with explicit checks for existing resources. Docker relies on docker-compose idempotency (~70%). DevPod delegates to its CLI (~60%). You can edit sindri.yaml and re-deploy to apply configuration changes like memory, CPU, or profile. Use '--skip-build' for faster iteration when you don't need image rebuilds.","tags":["idempotent","redeploy","update","changes"],"docs":["docs/DEPLOYMENT.md"]},{"id":"deploy-docker","category":"deployment","question":"How do I deploy to local Docker?","answer":"Run 'sindri deploy --provider docker' or set 'deployment.provider: docker' in sindri.yaml. This generates a docker-compose.yml and runs 'docker compose up -d'. Connect with 'sindri connect' or 'docker exec'. Docker is ideal for local development, testing, offline work, and zero-cost environments.","tags":["docker","local","compose"],"docs":["docs/providers/DOCKER.md"]},{"id":"deploy-fly","category":"deployment","question":"How do I deploy to Fly.io?","answer":"First authenticate with 'flyctl auth login'. Then run 'sindri deploy --provider fly' or set 'deployment.provider: fly' in sindri.yaml. Configure region, organization, SSH port, and auto-suspend options under providers.fly. Fly.io is great for remote access, cost-optimized cloud deployment, and auto-suspend/resume capabilities.","tags":["fly","flyio","cloud"],"docs":["docs/providers/FLY.md"]},{"id":"deploy-devpod","category":"deployment","question":"How do I deploy with DevPod?","answer":"Run 'sindri deploy --provider devpod' to generate a devcontainer.json. DevPod supports multiple backends via the 'type' field: docker (local), aws, gcp, azure, digitalocean, kubernetes, or ssh. For VS Code integration, open the folder and use 'Dev Containers: Open Folder in Container'. DevPod is ideal for IDE integration and multi-cloud deployments.","tags":["devpod","devcontainer","vscode"],"docs":["docs/providers/DEVPOD.md"]},{"id":"deploy-kubernetes","category":"deployment","question":"How do I deploy to Kubernetes?","answer":"Kubernetes deployment uses DevPod with 'type: kubernetes'. Set 'deployment.provider: devpod' and configure 'providers.devpod.type: kubernetes' with namespace and storageClass options. For local K8s testing, Sindri can auto-provision kind or k3d clusters. For remote clusters, provide KUBECONFIG or use the context option.","tags":["kubernetes","k8s","pods"],"docs":["docs/providers/KUBERNETES.md"]},{"id":"deploy-e2b","category":"deployment","question":"How do I deploy to E2B?","answer":"First, get an E2B API key from e2b.dev (free tier includes $100 credits) and install the CLI with 'npm install -g @e2b/cli'. Set the environment variable 'export E2B_API_KEY=e2b_...' then run 'sindri deploy --provider e2b' or set 'deployment.provider: e2b' in sindri.yaml. The first deploy builds a template (2-5 minutes), subsequent deploys start in ~150ms. Connect with 'sindri connect' which uses WebSocket PTY instead of SSH. Configure region, timeout, autoPause, and network policies under 'providers.e2b' in sindri.yaml.","tags":["e2b","deploy","setup","cloud"],"docs":["docs/providers/E2B.md","docs/DEPLOYMENT.md","examples/e2b/"]},{"id":"e2b-pause-resume","category":"deployment","question":"How does E2B pause/resume work?","answer":"E2B uses snapshot-based pause/resume instead of traditional persistent volumes. When idle (default 5 minutes), the sandbox pauses by saving a snapshot of all RAM and disk state. Paused sandboxes have no compute cost, only storage (included in free tier). When you connect, the sandbox auto-resumes from the snapshot. Pause takes approximately 4 seconds per 1GB of RAM. Enable with 'providers.e2b.autoPause: true' and 'autoResume: true'. Important: Paused sandboxes expire 30 days from creation - always push work to git before this deadline.","tags":["e2b","pause","resume","persistence","cost"],"docs":["docs/providers/E2B.md"]},{"id":"e2b-cost","category":"deployment","question":"How much does E2B cost and how do I minimize costs?","answer":"E2B uses per-second billing: 1 vCPU costs ~$0.05/hour, 2 vCPU ~$0.10/hour, RAM costs ~$0.016/GB/hour. Example: 2 vCPU + 2GB RAM for 8 hours/day, 22 days/month is ~$23 without pause, ~$12 with 50% pause time. Minimize costs by: (1) enabling autoPause to eliminate idle compute costs, (2) manually pausing with 'sindri pause' when stepping away, (3) right-sizing resources (start with 1 vCPU, 1GB RAM), (4) using ephemeral mode for testing ('--ephemeral' flag), and (5) monitoring usage in the E2B dashboard with billing alerts.","tags":["e2b","cost","billing","optimization","pricing"],"docs":["docs/providers/E2B.md","docs/CONFIGURATION.md"]},{"id":"e2b-vs-others","category":"deployment","question":"How does E2B differ from Docker, Fly.io, and DevPod?","answer":"E2B specializes in ultra-fast startup (~150ms vs 10-60s for others) and AI code execution. Key differences: E2B uses WebSocket PTY access (works through firewalls) while others use SSH; E2B uses pause/resume snapshots while others use persistent volumes; E2B has per-second billing while Fly.io is hourly; E2B has no GPU support while Fly.io and DevPod do. Choose E2B for AI agent sandboxes and rapid iteration, Docker for local/offline development, Fly.io for GPU workloads and production deployments, and DevPod for VS Code Remote integration.","tags":["e2b","comparison","providers","docker","fly","devpod"],"docs":["docs/providers/E2B.md","docs/providers/DOCKER.md","docs/providers/FLY.md","docs/providers/DEVPOD.md"]},{"id":"e2b-vscode","category":"deployment","question":"Can I use VS Code Remote SSH with E2B?","answer":"No, E2B doesn't support SSH - it uses WebSocket PTY for terminal access instead. For VS Code workflows with E2B, you have three options: (1) use file sync commands 'e2b sandbox files upload/download' to sync files between local and sandbox, (2) run VS Code Server inside the sandbox and access it via public URL with 'publicAccess: true', or (3) use a terminal-only workflow with 'sindri connect'. For native VS Code Remote SSH integration, use DevPod or Fly.io providers instead.","tags":["e2b","vscode","ssh","ide","limitations"],"docs":["docs/providers/E2B.md"]},{"id":"fly-auto-suspend","category":"deployment","question":"How does Fly.io auto-suspend work? Will I save money?","answer":"Enable auto-suspend with 'providers.fly.autoStopMachines: true' and 'autoStartMachines: true'. The machine suspends after ~5 minutes of idle time and automatically resumes when you SSH connect. You only pay for active time, not idle time, which can significantly reduce costs for intermittent development work.","tags":["fly","autosuspend","cost","billing"],"docs":["docs/providers/FLY.md","docs/CONFIGURATION.md"]},{"id":"connect-environment","category":"deployment","question":"How do I connect to my deployed environment?","answer":"Run 'sindri connect' which auto-detects the provider and opens an SSH session. For Docker, it uses 'docker exec'. For Fly.io, it uses 'flyctl ssh console' or direct SSH. For DevPod, it uses 'devpod ssh'. You land in the workspace directory as the 'developer' user with full environment access.","tags":["connect","ssh","access"],"docs":["docs/CLI.md"]},{"id":"destroy-environment","category":"deployment","question":"How do I tear down a deployment?","answer":"Run 'sindri destroy' for interactive confirmation or 'sindri destroy --force' to skip confirmation. This stops containers, destroys Fly.io machines and volumes, or removes DevPod workspaces. Warning: This is destructive and removes persistent data. Back up your workspace first if needed.","tags":["destroy","teardown","cleanup"],"docs":["docs/CLI.md","docs/DEPLOYMENT.md"]},{"id":"backup-workspace","category":"deployment","question":"How do I backup my Sindri workspace?","answer":"Run 'sindri backup --output ./backups/' to create a timestamped tarball of your workspace. Choose a backup profile: 'user-data' (projects, scripts, SSH keys - smallest and safest for migration), 'standard' (user-data plus shell/app configs - default), or 'full' (everything except caches - disaster recovery). Use '--dry-run' to preview what will be backed up. Backups work across all providers (Docker, Fly.io, E2B). Upload to S3 with 'sindri backup --s3 s3://bucket/path'. System markers like .initialized are automatically excluded to prevent breaking fresh deployments.","tags":["backup","data","migration","disaster-recovery"],"docs":["docs/BACKUP_RESTORE.md","docs/CLI.md"]},{"id":"extension-install","category":"extensions","question":"How do I install an extension?","answer":"Inside the deployed container, run 'extension-manager install <name>' (e.g., 'extension-manager install nodejs'). Dependencies are automatically resolved and installed in topological order. After installation, run 'source ~/.bashrc' to reload your environment, or reconnect to the container.","tags":["install","extensions","tools"],"docs":["docs/EXTENSIONS.md","docs/CLI.md"]},{"id":"extension-install-profile","category":"extensions","question":"How do I install all extensions from a profile?","answer":"Run 'extension-manager install-profile <name>' (e.g., 'extension-manager install-profile fullstack'). This installs all extensions defined in the profile with their dependencies. Available profiles: minimal, fullstack, ai-dev, anthropic-dev, systems, enterprise, devops, mobile.","tags":["profile","bundle","install"],"docs":["docs/EXTENSIONS.md"]},{"id":"extension-list","category":"extensions","question":"How do I see available extensions?","answer":"Run 'extension-manager list' to see all available extensions. Use '--category <name>' to filter by category (language, dev-tools, ai, infrastructure, etc.). Run 'extension-manager list-profiles' to see available profiles, and 'extension-manager list-categories' to see all categories.","tags":["list","available","catalog"],"docs":["docs/EXTENSIONS.md","docs/CLI.md"]},{"id":"extension-validate","category":"extensions","question":"How do I validate that extensions are installed correctly?","answer":"Run 'extension-manager validate <name>' for a single extension or 'extension-manager validate-all' for all installed extensions. Validation runs the extension's defined validation commands and checks expected output patterns. This verifies that tools are properly installed and accessible in PATH.","tags":["validate","verify","check"],"docs":["docs/CLI.md"]},{"id":"extension-remove","category":"extensions","question":"How do I remove an extension?","answer":"Run 'extension-manager remove <name>'. This executes the extension's removal script, updates the manifest, and cleans up installation artifacts. Some extensions (docker, infra-tools, etc.) require confirmation before removal. Note: Dependent extensions are not automatically removed.","tags":["remove","uninstall","delete"],"docs":["docs/CLI.md"]},{"id":"extension-reinstall","category":"extensions","question":"How do I reinstall an extension?","answer":"Run 'extension-manager reinstall <name>' to remove and reinstall a single extension, or 'extension-manager reinstall-profile <profile>' to reinstall all extensions in a profile. This is useful after deploying an updated Sindri image with new extension definitions, or when troubleshooting broken installations. The reinstall command forces removal without confirmation, clears markers, and performs a fresh install.","tags":["reinstall","fix","refresh","update"],"docs":["docs/CLI.md"]},{"id":"extension-manager-where","category":"extensions","question":"Can I run extension-manager on my host machine or only inside the container?","answer":"Extension-manager is designed for dual-environment execution. The primary use case is inside the deployed container where tools are actually installed. However, read-only operations like list, validate, info, and search work on the host machine too. For actual installations, run extension-manager inside the container since tools are installed to the persistent volume.","tags":["host","container","location"],"docs":["docs/CLI.md","docs/ARCHITECTURE.md"]},{"id":"extension-dependencies","category":"extensions","question":"How are extension dependencies handled?","answer":"Dependencies are declared in each extension's YAML file and automatically resolved using topological sort. When you install an extension, all its dependencies are installed first. For example, ai-toolkit depends on nodejs, python, golang, and github-cli, which are all installed automatically. View dependencies with 'extension-manager info <name>'.","tags":["dependencies","resolution","automatic"],"docs":["docs/EXTENSIONS.md","docs/EXTENSION_AUTHORING.md"]},{"id":"create-extension","category":"extensions","question":"How do I create a custom extension?","answer":"Create a directory in docker/lib/extensions/<name>/ with an extension.yaml file. Define metadata (name, version, category), requirements (domains, diskSpace), install method (mise, apt, script, npm, binary, or hybrid), configure section for environment variables, and validate section with verification commands. Add it to docker/lib/registry.yaml and validate with 'extension-manager validate <name>'. Use the comprehensive extension authoring checklist in docs/EXTENSION_AUTHORING.md to ensure completeness.","tags":["create","custom","authoring"],"docs":["docs/EXTENSION_AUTHORING.md"]},{"id":"docker-in-docker","category":"extensions","question":"What is Docker-in-Docker and when do I need it?","answer":"Docker-in-Docker (DinD) allows running Docker containers inside your Sindri container. You need DinD for containerized development workflows: building Docker images, running docker-compose for local testing, Kubernetes development with kind/k3d, CI/CD pipelines that build containers, or multi-container integration testing. Sindri v1.1.0+ supports three DinD modes: sysbox (secure, requires host setup), privileged (works everywhere but less secure), and socket (shares host Docker daemon). Enable with 'providers.docker.dind.enabled: true' and choose a mode based on your security and host access requirements.","tags":["docker","dind","containers","development"],"docs":["docs/extensions/DOCKER.md","examples/docker/dind-*.sindri.yaml"]},{"id":"dind-modes","category":"extensions","question":"Which DinD mode should I choose?","answer":"Choose based on host access and security needs: Use 'sysbox' (best security and performance with overlay2 storage) if you can install software on the host - run './scripts/setup-sysbox-host.sh' first. Use 'privileged' if you can't modify the host but accept security risks - works everywhere including Fly.io, uses slower vfs storage. Use 'socket' for simple builds when you just need to share the host's Docker daemon - least isolated but native performance. Use 'auto' (recommended) to auto-detect the best available mode. Note: Sysbox requires Linux (not macOS) and isn't available on managed services like Fly.io.","tags":["docker","dind","modes","security","configuration"],"docs":["docs/extensions/DOCKER.md"]},{"id":"dind-sysbox","category":"extensions","question":"How do I set up Sysbox for secure Docker-in-Docker?","answer":"Sysbox must be installed on the HOST machine (not inside Sindri). For local Linux development machines or cloud VMs you control (EC2, GCP Compute, Azure VM), run './scripts/setup-sysbox-host.sh' on the host. This script installs the Sysbox container runtime, configures Docker to use it, and handles kernel compatibility. Verify with 'docker info | grep sysbox-runc'. Then set 'providers.docker.dind.mode: sysbox' in sindri.yaml and deploy. Sysbox is NOT available for Fly.io, managed Kubernetes, macOS, Windows, or CI services you don't control - use privileged mode instead for these environments.","tags":["docker","sysbox","setup","security","dind"],"docs":["docs/extensions/DOCKER.md","scripts/setup-sysbox-host.sh"]},{"id":"python-uv","category":"extensions","question":"What is uv and how do I use it with Python?","answer":"uv is a modern, extremely fast Python package installer and resolver (10-100x faster than pip) included with the Python extension v1.1.0+. Use 'uv pip install <package>' for fast package installation, 'uv venv' to create virtual environments, and 'uvx <package>' to execute packages without installation (like npx for Node.js). uv is installed via mise alongside Python 3.13. It replaces pip for most workflows while maintaining compatibility with requirements.txt and pyproject.toml. Use uv for faster CI/CD builds, large dependency trees, and rapid prototyping.","tags":["python","uv","packages","tools","performance"],"docs":["docs/extensions/PYTHON.md"]},{"id":"secrets-overview","category":"secrets","question":"How does Sindri handle secrets?","answer":"Sindri provides a unified, declarative secrets management approach. Secrets can come from three sources: env (environment variables, .env files), file (certificates, SSH keys mounted into container), or vault (HashiCorp Vault). Configure secrets in sindri.yaml under the 'secrets' section. Each provider handles secrets using its native mechanisms.","tags":["secrets","overview","management"],"docs":["docs/SECRETS_MANAGEMENT.md"]},{"id":"secrets-env","category":"secrets","question":"How do I use environment variables for secrets?","answer":"Create a .env.local file (gitignored) with your secrets like ANTHROPIC_API_KEY=sk-ant-.... In sindri.yaml, add: secrets: [{name: ANTHROPIC_API_KEY, source: env}]. Sindri resolves secrets in priority order: shell environment, .env.local, .env, then fromFile if specified. Mark secrets as 'required: true' to fail deployment if missing.","tags":["env","environment","dotenv"],"docs":["docs/SECRETS_MANAGEMENT.md"]},{"id":"secrets-ssh","category":"secrets","question":"How do I configure SSH keys for container access?","answer":"For SSH INTO the container, use 'fromFile' to read your public key: secrets: [{name: AUTHORIZED_KEYS, source: env, fromFile: ~/.ssh/id_ed25519.pub}]. Your laptop keeps the private key; the container gets the public key. For SSH OUT FROM the container (git clone), mount a deploy private key using source: file with appropriate mountPath and permissions: '0600'.","tags":["ssh","keys","authentication"],"docs":["docs/SECRETS_MANAGEMENT.md"]},{"id":"secrets-vault","category":"secrets","question":"How do I integrate with HashiCorp Vault?","answer":"Install Vault CLI and configure VAULT_ADDR and VAULT_TOKEN environment variables. In sindri.yaml, use: secrets: [{name: DATABASE_PASSWORD, source: vault, vaultPath: secret/data/myapp/prod, vaultKey: password}]. Sindri retrieves the secret at deploy time and injects it using the provider's native mechanism. Use 'sindri secrets test-vault' to verify connectivity.","tags":["vault","hashicorp","enterprise"],"docs":["docs/SECRETS_MANAGEMENT.md"]},{"id":"secrets-validate","category":"secrets","question":"How do I validate my secrets configuration?","answer":"Run 'sindri secrets validate' to check all configured secrets. It verifies that env secrets exist in .env files or environment, file secrets exist at specified paths, and vault secrets are retrievable. Output shows status for each secret with helpful hints for missing ones.","tags":["validate","check","verify"],"docs":["docs/SECRETS_MANAGEMENT.md","docs/CLI.md"]},{"id":"secrets-fly","category":"secrets","question":"How are secrets handled on Fly.io specifically?","answer":"Sindri resolves secrets from configured sources, then runs 'flyctl secrets import' to set them atomically. File secrets are base64-encoded and decoded in the container entrypoint. You can also set secrets manually with 'flyctl secrets set KEY=value -a app-name'. Secrets persist across deployments and machine restarts.","tags":["fly","flyctl","cloud"],"docs":["docs/SECRETS_MANAGEMENT.md","docs/providers/FLY.md"]},{"id":"troubleshoot-yq","category":"troubleshooting","question":"I get 'yq command not found'. How do I fix this?","answer":"Install yq: on macOS use 'brew install yq', on Ubuntu/Debian use 'sudo apt install yq', or manually download from GitHub releases and place in /usr/local/bin. Sindri uses yq for YAML processing. Verify installation with 'yq --version'.","tags":["yq","install","missing"],"docs":["docs/TROUBLESHOOTING.md"]},{"id":"troubleshoot-docker","category":"troubleshooting","question":"I get 'Cannot connect to Docker daemon'. What's wrong?","answer":"Docker isn't running. On macOS, open Docker Desktop application. On Linux, run 'sudo systemctl start docker'. If you get permission errors, add your user to the docker group: 'sudo usermod -aG docker $USER' then logout/login or run 'newgrp docker'.","tags":["docker","daemon","permission"],"docs":["docs/TROUBLESHOOTING.md"]},{"id":"troubleshoot-extension","category":"troubleshooting","question":"An extension installation failed. How do I debug it?","answer":"Check the installation log at /workspace/.system/logs/<extension>-install.log. Run 'extension-manager validate <extension>' to see what's failing. Common causes: insufficient disk space (check with 'df -h /workspace'), missing dependencies (run 'extension-manager show <extension>'), or network issues (test DNS with 'ping registry.npmjs.org').","tags":["extension","failed","debug","logs"],"docs":["docs/TROUBLESHOOTING.md"]},{"id":"troubleshoot-command-not-found","category":"troubleshooting","question":"After installing an extension, the command is not found. Why?","answer":"Your shell environment needs to be reloaded. Run 'source ~/.bashrc' to reload PATH and environment variables. Alternatively, disconnect and reconnect to the container. For mise-managed tools, ensure mise is activated with 'eval \"$(mise activate bash)\"'. You can also run 'mise reshim' to regenerate shims.","tags":["path","command","bashrc","reload"],"docs":["docs/TROUBLESHOOTING.md"]},{"id":"troubleshoot-ssh-refused","category":"troubleshooting","question":"SSH connection refused on Fly.io. What should I check?","answer":"The machine might be suspended (auto-stop). Check status with 'flyctl status -a <app>' and 'flyctl machine list -a <app>'. If suspended, either wait for auto-start on connection attempt (10-20 seconds) or manually start with 'flyctl machine start <machine-id> -a <app>'. Also verify your SSH key is authorized.","tags":["ssh","fly","connection","refused"],"docs":["docs/TROUBLESHOOTING.md","docs/providers/FLY.md"]},{"id":"troubleshoot-permission-denied","category":"troubleshooting","question":"I get 'Permission denied' in /workspace. How do I fix it?","answer":"The workspace should be owned by the 'developer' user (uid 1001). Check ownership with 'ls -la /workspace'. Fix with 'chown -R developer:developer /workspace' (run as root in container). This can happen if the volume was created with wrong permissions. Rebuilding the volume also fixes this.","tags":["permission","ownership","workspace"],"docs":["docs/TROUBLESHOOTING.md"]},{"id":"troubleshoot-out-of-memory","category":"troubleshooting","question":"My container keeps getting killed (OOM). What do I do?","answer":"Increase memory in sindri.yaml under deployment.resources.memory (e.g., from '2GB' to '4GB'). Then redeploy with 'sindri deploy'. Monitor usage with 'free -h' or 'docker stats'. For Fly.io, larger memory tiers use bigger VM sizes. Consider using the 'minimal' profile if running many tools isn't needed.","tags":["oom","memory","killed","resources"],"docs":["docs/TROUBLESHOOTING.md","docs/CONFIGURATION.md"]},{"id":"e2b-retention","category":"troubleshooting","question":"What happens if I lose my paused E2B sandbox?","answer":"Paused E2B sandboxes expire 30 days after initial creation. After expiration, all data is permanently lost. To prevent data loss: (1) always commit and push work to git regularly, (2) check sandbox status with 'sindri status', (3) use 'sindri backup' for critical data before the 30-day window expires, and (4) never rely on paused state as your only backup. If you need longer-term persistence, use Fly.io or Docker with persistent volumes instead. The 30-day retention is a fundamental E2B platform limitation.","tags":["e2b","retention","data-loss","troubleshooting","backup"],"docs":["docs/providers/E2B.md","docs/TROUBLESHOOTING.md"]},{"id":"troubleshoot-npm-timeout","category":"troubleshooting","question":"How does Sindri handle npm package installations?","answer":"Sindri uses pnpm as the default package manager for all npm: backend packages (configured globally in mise-config). This provides faster installations, better disk efficiency through content-addressable storage, and built-in security features. The nodejs extension bootstraps pnpm via npm, then mise automatically uses pnpm for all package installations. All packages use pinned versions (e.g., typescript=5.9, eslint=9) for reliable, reproducible installations without registry queries.","tags":["pnpm","npm","package-manager","extension","mise","performance"],"docs":["docs/extensions/NODEJS.md","docs/extensions/NODEJS-DEVTOOLS.md"]},{"id":"architecture-volumes","category":"architecture","question":"How does Sindri's volume architecture work?","answer":"Sindri uses a two-tier filesystem. Immutable system files in /docker/lib are baked into the image (extensions, schemas, scripts). The mutable home directory at /alt/home/developer is a persistent volume mount that IS $HOME. It contains workspace/, .local/, .config/, .cache/, and all user data. This survives container restarts and contains all installed tools.","tags":["volumes","filesystem","persistence","home"],"docs":["docs/ARCHITECTURE.md","CLAUDE.md"]},{"id":"architecture-home","category":"architecture","question":"Why is $HOME at /alt/home/developer instead of /home/developer?","answer":"The /alt/home/developer path is the persistent volume mount point. By making this $HOME, everything the user creates (configs, tools, projects) persists across container restarts. The 'alt' prefix avoids conflicts with the default /home directory that might be created by the base image. This is a key design decision for data persistence.","tags":["home","path","persistence"],"docs":["docs/ARCHITECTURE.md","CLAUDE.md"]},{"id":"architecture-entrypoint","category":"architecture","question":"What happens when the container starts (entrypoint)?","answer":"The entrypoint.sh script runs as root and: initializes the home directory structure on first boot, sets correct ownership for the developer user, configures SSH authorized keys from AUTHORIZED_KEYS env var, configures Git user from GIT_USER_NAME and GIT_USER_EMAIL, then starts the SSH daemon on port 2222 (unless CI_MODE=true, which uses 'sleep infinity' instead).","tags":["entrypoint","startup","initialization"],"docs":["docs/ARCHITECTURE.md","docker/scripts/entrypoint.sh"]},{"id":"architecture-mise","category":"architecture","question":"What is mise and why does Sindri use it?","answer":"Mise (formerly rtx) is a unified tool version manager that replaces asdf, nvm, pyenv, etc. Sindri uses mise because it's fast, supports many tools, and stores everything in the user's home directory (persistent volume). Tools installed via mise go to $HOME/.local/share/mise/, making them persist across container restarts. Extensions declare mise.toml configurations for tool installation.","tags":["mise","tools","version-manager"],"docs":["docs/extensions/MISE-CONFIG.md","docs/ARCHITECTURE.md"]},{"id":"architecture-adapters","category":"architecture","question":"How do provider adapters work?","answer":"Each provider has a dedicated adapter script in deploy/adapters/ that handles the full lifecycle: deploy, connect, destroy, plan, status. The sindri CLI delegates all operations to these adapters. Docker adapter generates docker-compose.yml, Fly adapter generates fly.toml, DevPod adapter generates devcontainer.json. This keeps provider-specific logic encapsulated and makes adding new providers straightforward.","tags":["adapters","providers","architecture"],"docs":["docs/ARCHITECTURE.md","deploy/adapters/"]},{"id":"architecture-extensions-yaml","category":"architecture","question":"Why are extensions YAML files instead of bash scripts?","answer":"YAML-first architecture is a core design principle. Extension definitions are declarative YAML that describe what to install, not how. The executor.sh module interprets the YAML and executes installation. This enables validation against JSON schemas, consistent behavior across extensions, easier maintenance, and the ability to add new installation methods without modifying extension files.","tags":["yaml","declarative","extensions"],"docs":["docs/ARCHITECTURE.md","docs/EXTENSION_AUTHORING.md"]},{"id":"backup-system-markers","category":"architecture","question":"Why are system markers never restored during backup restore?","answer":"System markers like .initialized and workspace/.system/bootstrap.yaml control first-boot initialization and auto-install behavior. If restored to a new instance, .initialized causes the entrypoint to skip critical setup (missing .bashrc, broken PATH, no home directory structure). If bootstrap.yaml is restored, auto-install thinks extensions are already installed, resulting in missing tools and a broken development environment. The backup-restore tool automatically excludes these markers to ensure fresh deployments initialize correctly. User data (projects, configs, scripts) is always preserved while system state is regenerated.","tags":["backup","restore","architecture","system","markers"],"docs":["docs/BACKUP_RESTORE.md","docs/ARCHITECTURE.md"]},{"id":"agentdb-init","category":"architecture","question":"How is claude-flow AgentDB automatically initialized?","answer":"When creating or cloning a project with claude-flow (v2 or v3) via new-project or clone-project with '--use-claude-flow' or '--use-agentic-qe', Sindri automatically detects and initializes the AgentDB backend for persistent memory storage. After claude-flow initialization, the init-claude-flow-agentdb script runs, which checks for AgentDB support, creates the database directory, configures connection settings, and verifies the backend is functional. This provides claude-flow sessions with automatic memory persistence without manual setup. The AgentDB data is stored in your persistent workspace volume, surviving container restarts.","tags":["claude-flow","claude-flow-v2","claude-flow-v3","agentdb","memory","persistence","automation"],"docs":["docs/PROJECT_MANAGEMENT.md","cli/init-claude-flow-agentdb"]},{"id":"cicd-local-testing","category":"cicd","question":"How do I run tests locally before pushing?","answer":"Run tests inside a local container using sindri-test.sh. First build the image with 'pnpm build', then start a container with 'docker run -d --name test -e SKIP_AUTO_INSTALL=true sindri:local'. Run quick tests with 'docker exec test /docker/scripts/sindri-test.sh --level quick', extension tests with '--level extension', or profile tests with '--level profile --profile minimal'. This is the same test script used in CI.","tags":["testing","local","docker","sindri-test"],"docs":["docs/CI_WORKFLOW_IN_DEPTH.md","docs/TESTING.md"]},{"id":"cicd-workflows-overview","category":"cicd","question":"What GitHub Actions workflows are available?","answer":"Five main workflows: ci.yml (full CI pipeline - runs on push/PR), test-extensions.yml (test individual extensions from registry), test-profiles.yml (test sindri.yaml configs from examples/), manual-deploy.yml (deploy to any provider on-demand), and deploy-sindri.yml (reusable deployment workflow). Each can be triggered manually via GitHub UI or 'gh workflow run'.","tags":["workflows","github","actions","overview"],"docs":[".github/workflows/","docs/CI_WORKFLOW_IN_DEPTH.md"]},{"id":"cicd-trigger-workflows","category":"cicd","question":"How do I trigger CI workflows manually with gh CLI?","answer":"Use 'gh workflow run <workflow>.yml' with field flags. Examples: 'gh workflow run ci.yml -f providers=\"docker,fly\" -f test-level=\"quick\"' for quick CI, 'gh workflow run test-extensions.yml -f extensions=\"nodejs,python\"' to test extensions, 'gh workflow run test-profiles.yml -f config-path=\"examples/fly/\"' to test configs. Add '-f skip-cleanup=true' for debugging.","tags":["gh","cli","trigger","workflow"],"docs":["docs/CI_WORKFLOW_IN_DEPTH.md"]},{"id":"cicd-test-levels","category":"cicd","question":"What are the different test levels in CI?","answer":"Three test levels: 'quick' (10-15s) validates CLI commands work (sindri --version, extension-manager list); 'extension' (45-60s) tests full extension lifecycle (install, validate, remove) with idempotency check; 'profile' (90-120s) tests full profile lifecycle (install-profile, validate-all, remove). All tests run inside the container via /docker/scripts/sindri-test.sh.","tags":["testing","levels","quick","extension","profile"],"docs":["docs/CI_WORKFLOW_IN_DEPTH.md"]},{"id":"cicd-ci-mode","category":"cicd","question":"What is CI_MODE and when should I use it?","answer":"CI_MODE=true disables the SSH daemon and keeps the container alive with 'sleep infinity'. This avoids port conflicts with Fly.io's hallpass (port 22) and is designed for automated testing. CI mode also forces autoInstall=false for clean-slate testing. Access containers via 'flyctl ssh console' (Fly.io) or 'docker exec' (Docker) instead of direct SSH.","tags":["ci","mode","testing","automated"],"docs":["docs/CI_WORKFLOW_IN_DEPTH.md","CLAUDE.md"]},{"id":"cicd-validation","category":"cicd","question":"How do I validate YAML and shell scripts?","answer":"Run 'pnpm validate' to run all validation (YAML, shell, markdown). Individual commands: 'pnpm lint:yaml' (yamllint --strict), 'pnpm lint:shell' (shellcheck -S warning), 'pnpm lint:md' (markdownlint). The CI workflow (ci.yml) runs these checks automatically on push/PR. Schema validation happens via validate-yaml.yml workflow.","tags":["validation","lint","yaml","shell"],"docs":[".github/workflows/validate-yaml.yml","CLAUDE.md"]},{"id":"cicd-debug-failures","category":"cicd","question":"How do I debug CI test failures?","answer":"Add '-f skip-cleanup=true' when triggering workflows to keep containers running after failure. Use 'gh run view <run-id> --log' to see logs. For Fly.io, SSH in with 'flyctl ssh console -a <app-name>'. Check extension logs at /alt/home/developer/workspace/.system/logs/<extension>-install.log. Use 'gh run watch' to monitor running workflows.","tags":["debug","failures","logs","troubleshooting"],"docs":["docs/CI_WORKFLOW_IN_DEPTH.md","docs/TROUBLESHOOTING.md"]},{"id":"vscode-remote-fly","category":"deployment","question":"How do I connect VS Code to my Fly.io Sindri instance?","answer":"Use the VS Code Remote - SSH extension. First, ensure your AUTHORIZED_KEYS secret is configured with your public key (fromFile: ~/.ssh/id_ed25519.pub). Then add an entry to ~/.ssh/config: 'Host sindri-fly' with 'HostName <app-name>.fly.dev', 'Port 10022', 'User developer', and 'IdentityFile ~/.ssh/id_ed25519'. In VS Code, open Command Palette (Cmd+Shift+P) and select 'Remote-SSH: Connect to Host', then choose 'sindri-fly'. If direct SSH is blocked by firewalls, use 'flyctl proxy 10022:2222 -a <app-name>' and connect to localhost:10022 instead.","tags":["vscode","remote","ssh","fly","ide"],"docs":["docs/providers/FLY.md"]},{"id":"gpu-support","category":"configuration","question":"Does Sindri support GPU-accelerated workloads?","answer":"Yes! Sindri supports GPU configuration across multiple providers (Fly.io, AWS, GCP, Azure, Docker, Kubernetes). Configure GPUs in sindri.yaml under deployment.resources.gpu with properties: enabled (true/false), type (nvidia/amd), count (1-8), tier (gpu-small/medium/large/xlarge), and memory. GPU tiers abstract provider-specific GPU types for easier configuration. See docs/GPU.md for comprehensive examples, pricing, and use cases.","tags":["gpu","ml","ai","cuda","acceleration"],"docs":["docs/GPU.md","docs/CONFIGURATION.md"]},{"id":"gpu-tiers","category":"configuration","question":"What GPU tiers are available and what do they map to?","answer":"Four GPU tiers: gpu-small (T4, 8-16GB, $0.50-1.00/hr) for inference and development; gpu-medium (A10G/L4, 16-24GB, $1.00-2.00/hr) for training and inference; gpu-large (A100-40GB/L40S, 40-48GB, $2.50-4.00/hr) for large model training; gpu-xlarge (A100-80GB/H100, 80GB+, $8.00-15.00/hr) for LLM training. Each tier maps to provider-specific GPU types automatically. See docs/GPU.md for complete mappings and cost comparisons.","tags":["gpu","tiers","pricing","instances"],"docs":["docs/GPU.md"]},{"id":"region-selection","category":"configuration","question":"Which cloud region should I choose for my deployment?","answer":"Choose based on: proximity (lowest latency), GPU availability (us-west-2 for AWS, us-central1-a for GCP, eastus for Azure), and cost (varies by region). Fly.io regions: sjc (US West), iad (US East), lhr (London). AWS best: us-west-2, us-east-1. GCP best: us-central1-a/b. Azure best: eastus, westeurope. Test latency with 'ping compute.us-west-2.amazonaws.com'. Full region documentation in docs/CONFIGURATION.md under Cloud Provider Regions.","tags":["regions","zones","location","latency"],"docs":["docs/CONFIGURATION.md","docs/GPU.md"]},{"id":"test-suites","category":"cicd","question":"What test suites are available for deployed instances?","answer":"Three test suite levels: 'smoke' (~30s) for basic connectivity and health checks (container running, SSH works, commands execute); 'integration' (~5-10min) for full extension validation (runs extension-manager validate-all); 'full' (~10-15min) runs all suites sequentially including profile lifecycle tests. Run with 'sindri test --suite <name>'. Smoke tests are good after deployment, integration before production, full in CI/CD pipelines.","tags":["testing","suites","smoke","integration","validation"],"docs":["CLAUDE.md","docs/TESTING.md"]},{"id":"manifest-schema","category":"extensions","question":"What is the manifest.json file and how does it work?","answer":"Extension manifests are JSON files in $WORKSPACE/.system/manifest/ that track installed extensions, their activation state, dependencies, and execution configuration. The extension-manager uses manifests to manage lifecycles. Each manifest contains version, extensions array (with name, active, protected, category, dependencies), and optional config (execution settings like parallel/failFast/timeout and validation settings like schemaValidation/dnsCheck/dependencyCheck). See docs/MANIFEST.md for complete reference.","tags":["manifest","json","tracking","state"],"docs":["docs/MANIFEST.md","docs/SCHEMA.md"]},{"id":"link-checking","category":"cicd","question":"How are documentation links validated?","answer":"Sindri uses automated link checking via .github/workflows/check-links.yml. Internal markdown links are checked on every PR, external URLs are checked weekly on schedule, and anchor links are validated for correctness. The workflow runs three jobs: check-internal-links (verifies file paths exist), check-external-links (uses markdown-link-check), and check-anchors (validates heading references). Manual checks available in docs/CONTRIBUTING.md.","tags":["links","validation","documentation","ci"],"docs":["docs/CONTRIBUTING.md",".github/workflows/check-links.yml"]}]};
</script>

<script>
/**
 * Sindri FAQ - Interactive FAQ with Accordion and Search
 *
 * Features:
 * - Real-time full-text search with highlighting
 * - Accordion-style expandable Q&A items
 * - Category filtering
 * - Dark/light theme toggle with system preference detection
 * - Responsive design support
 * - Keyboard navigation (Enter/Space to toggle, Escape to close)
 */

// Configuration
const CONFIG = {
  dataUrl: 'faq-data.json',
  githubBaseUrl: 'https://github.com/pacphi/sindri/blob/main/',
  debounceMs: 150,
  animationDurationMs: 300,
};

// State
const state = {
  faqData: null,
  filteredQuestions: [],
  activeCategory: 'all',
  searchQuery: '',
  openAccordions: new Set(),
};

// DOM Elements
const elements = {
  faqContainer: null,
  searchInput: null,
  clearSearch: null,
  searchStats: null,
  resultCount: null,
  categoryFilters: null,
  noResults: null,
  loading: null,
  themeToggle: null,
  resetSearch: null,
};

// ============================================================================
// Theme Management
// ============================================================================

function initTheme() {
  const savedTheme = localStorage.getItem('sindri-faq-theme');
  const systemPrefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;

  if (savedTheme === 'dark' || (!savedTheme && systemPrefersDark)) {
    document.documentElement.classList.add('dark');
  } else {
    document.documentElement.classList.remove('dark');
  }
}

function toggleTheme() {
  const isDark = document.documentElement.classList.toggle('dark');
  localStorage.setItem('sindri-faq-theme', isDark ? 'dark' : 'light');
}

// ============================================================================
// Data Loading
// ============================================================================

async function loadFaqData() {
  // Use embedded data (no fetch needed - injected by build.mjs)
  if (window.FAQ_DATA) {
    state.faqData = window.FAQ_DATA;
    state.filteredQuestions = [...state.faqData.questions];
    renderCategoryFilters();
    renderFaqItems();
    hideLoading();
    return;
  }
  // Fallback to fetch for development
  try {
    const response = await fetch('faq-data.json');
    if (!response.ok) throw new Error('HTTP ' + response.status);
    state.faqData = await response.json();
    state.filteredQuestions = [...state.faqData.questions];
    renderCategoryFilters();
    renderFaqItems();
    hideLoading();
  } catch (error) {
    console.error('Failed to load FAQ data:', error);
    showError('Failed to load FAQ data. Please refresh the page.');
  }
}

function hideLoading() {
  if (elements.loading) {
    elements.loading.style.display = 'none';
  }
}

function showError(message) {
  if (elements.loading) {
    elements.loading.innerHTML = `
      <div class="text-red-500 dark:text-red-400 flex items-center gap-2">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
        </svg>
        <span>${message}</span>
      </div>
    `;
  }
}

// ============================================================================
// Category Filtering
// ============================================================================

function renderCategoryFilters() {
  if (!elements.categoryFilters || !state.faqData) return;

  const categoryButtons = state.faqData.categories.map(cat => `
    <button data-category="${cat.id}"
            class="category-pill px-4 py-2 rounded-full text-sm font-medium transition-all
                   bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-300
                   hover:bg-slate-200 dark:hover:bg-slate-700">
      ${cat.name}
      <span class="ml-1 text-xs opacity-60">(${getCategoryCount(cat.id)})</span>
    </button>
  `).join('');

  // Keep "All Categories" button, add category buttons
  const allButton = elements.categoryFilters.querySelector('[data-category="all"]');
  if (allButton) {
    allButton.innerHTML = `All <span class="ml-1 text-xs opacity-75">(${state.faqData.questions.length})</span>`;
  }
  elements.categoryFilters.insertAdjacentHTML('beforeend', categoryButtons);

  // Add event listeners
  elements.categoryFilters.querySelectorAll('.category-pill').forEach(btn => {
    btn.addEventListener('click', () => setActiveCategory(btn.dataset.category));
  });
}

function getCategoryCount(categoryId) {
  return state.faqData.questions.filter(q => q.category === categoryId).length;
}

function setActiveCategory(categoryId) {
  state.activeCategory = categoryId;

  // Update UI
  elements.categoryFilters.querySelectorAll('.category-pill').forEach(btn => {
    const isActive = btn.dataset.category === categoryId;
    btn.classList.toggle('active', isActive);
    btn.classList.toggle('bg-sindri-500', isActive);
    btn.classList.toggle('text-white', isActive);
    btn.classList.toggle('shadow-lg', isActive);
    btn.classList.toggle('shadow-sindri-500/25', isActive);
    btn.classList.toggle('bg-slate-100', !isActive);
    btn.classList.toggle('dark:bg-slate-800', !isActive);
    btn.classList.toggle('text-slate-600', !isActive);
    btn.classList.toggle('dark:text-slate-300', !isActive);
  });

  filterAndRender();
}

// ============================================================================
// Search Functionality
// ============================================================================

function initSearch() {
  if (!elements.searchInput) return;

  let debounceTimer;

  elements.searchInput.addEventListener('input', (e) => {
    clearTimeout(debounceTimer);
    debounceTimer = setTimeout(() => {
      state.searchQuery = e.target.value.trim().toLowerCase();
      updateClearButton();
      filterAndRender();
    }, CONFIG.debounceMs);
  });

  elements.searchInput.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
      clearSearch();
    }
  });

  if (elements.clearSearch) {
    elements.clearSearch.addEventListener('click', clearSearch);
  }

  if (elements.resetSearch) {
    elements.resetSearch.addEventListener('click', () => {
      clearSearch();
      setActiveCategory('all');
    });
  }
}

function clearSearch() {
  state.searchQuery = '';
  if (elements.searchInput) {
    elements.searchInput.value = '';
  }
  updateClearButton();
  filterAndRender();
}

function updateClearButton() {
  if (elements.clearSearch) {
    elements.clearSearch.classList.toggle('hidden', !state.searchQuery);
  }
}

function filterAndRender() {
  if (!state.faqData) return;

  let filtered = state.faqData.questions;

  // Filter by category
  if (state.activeCategory !== 'all') {
    filtered = filtered.filter(q => q.category === state.activeCategory);
  }

  // Filter by search query
  if (state.searchQuery) {
    const query = state.searchQuery.toLowerCase();
    filtered = filtered.filter(q => {
      const searchableText = [
        q.question,
        q.answer,
        ...q.tags,
        getCategoryName(q.category)
      ].join(' ').toLowerCase();

      return searchableText.includes(query);
    });
  }

  state.filteredQuestions = filtered;
  renderFaqItems();
  updateSearchStats();
}

function updateSearchStats() {
  if (elements.searchStats && elements.resultCount) {
    if (state.searchQuery) {
      elements.searchStats.classList.remove('hidden');
      elements.resultCount.textContent = state.filteredQuestions.length;
    } else {
      elements.searchStats.classList.add('hidden');
    }
  }

  // Show/hide no results message
  if (elements.noResults) {
    elements.noResults.classList.toggle('hidden', state.filteredQuestions.length > 0);
  }
}

// ============================================================================
// FAQ Rendering
// ============================================================================

function renderFaqItems() {
  if (!elements.faqContainer || !state.faqData) return;

  // Clear existing items (except loading)
  const existingItems = elements.faqContainer.querySelectorAll('.faq-item');
  existingItems.forEach(item => item.remove());

  if (state.filteredQuestions.length === 0) {
    return;
  }

  // Group by category if not searching and showing all
  const shouldGroup = !state.searchQuery && state.activeCategory === 'all';

  if (shouldGroup) {
    renderGroupedFaq();
  } else {
    renderFlatFaq();
  }
}

function renderGroupedFaq() {
  const groupedQuestions = {};

  state.filteredQuestions.forEach(q => {
    if (!groupedQuestions[q.category]) {
      groupedQuestions[q.category] = [];
    }
    groupedQuestions[q.category].push(q);
  });

  // Render each category group
  state.faqData.categories.forEach(cat => {
    const questions = groupedQuestions[cat.id];
    if (!questions || questions.length === 0) return;

    const groupHtml = `
      <div class="faq-item mb-8">
        <h3 class="flex items-center gap-3 text-lg font-bold text-slate-900 dark:text-white mb-4 pb-2 border-b border-slate-200 dark:border-slate-700">
          ${getCategoryIcon(cat.icon)}
          <span>${cat.name}</span>
          <span class="text-sm font-normal text-slate-400">(${questions.length})</span>
        </h3>
        <div class="space-y-3">
          ${questions.map(q => createFaqItemHtml(q)).join('')}
        </div>
      </div>
    `;

    elements.faqContainer.insertAdjacentHTML('beforeend', groupHtml);
  });

  attachAccordionListeners();
}

function renderFlatFaq() {
  const html = state.filteredQuestions.map(q => createFaqItemHtml(q)).join('');
  elements.faqContainer.insertAdjacentHTML('beforeend', `<div class="faq-item space-y-3">${html}</div>`);
  attachAccordionListeners();
}

function createFaqItemHtml(question) {
  const isOpen = state.openAccordions.has(question.id);
  const highlightedQuestion = highlightText(question.question, state.searchQuery);
  const highlightedAnswer = highlightText(question.answer, state.searchQuery);

  return `
    <div class="accordion-item bg-white dark:bg-slate-800/50 rounded-xl border border-slate-200 dark:border-slate-700/50 shadow-sm hover:shadow-md transition-shadow overflow-hidden"
         data-id="${question.id}">
      <button class="accordion-trigger w-full px-5 py-4 text-left flex items-start gap-4 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-sindri-500"
              aria-expanded="${isOpen}"
              aria-controls="content-${question.id}">
        <span class="accordion-icon mt-1 flex-shrink-0 w-5 h-5 rounded-full bg-sindri-100 dark:bg-sindri-900/50 text-sindri-600 dark:text-sindri-400 flex items-center justify-center transition-transform duration-300 ${isOpen ? 'rotate-180' : ''}">
          <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M19 9l-7 7-7-7"/>
          </svg>
        </span>
        <div class="flex-grow min-w-0">
          <h4 class="text-base font-semibold text-slate-900 dark:text-white leading-snug">
            ${highlightedQuestion}
          </h4>
        </div>
      </button>
      <div id="content-${question.id}"
           class="accordion-content ${isOpen ? 'open' : ''}"
           role="region"
           aria-labelledby="trigger-${question.id}">
        <div class="px-5 pb-5 pt-0 ml-9">
          <div class="prose prose-sm dark:prose-invert max-w-none text-slate-600 dark:text-slate-300 leading-relaxed">
            ${highlightedAnswer}
          </div>
          ${renderDocLinks(question.docs)}
          ${renderTags(question.tags)}
        </div>
      </div>
    </div>
  `;
}

function renderDocLinks(docs) {
  if (!docs || docs.length === 0) return '';

  const links = docs.map(doc => {
    const url = CONFIG.githubBaseUrl + doc;
    const name = doc.split('/').pop();
    return `<a href="${url}" target="_blank" rel="noopener noreferrer"
               class="inline-flex items-center gap-1 text-sindri-600 dark:text-sindri-400 hover:underline">
              <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"/>
              </svg>
              ${name}
            </a>`;
  }).join('');

  return `
    <div class="mt-4 pt-3 border-t border-slate-100 dark:border-slate-700/50">
      <span class="text-xs font-medium text-slate-400 dark:text-slate-500 uppercase tracking-wide">Documentation:</span>
      <div class="mt-1 flex flex-wrap gap-3 text-sm">
        ${links}
      </div>
    </div>
  `;
}

function renderTags(tags) {
  if (!tags || tags.length === 0) return '';

  return `
    <div class="mt-3 flex flex-wrap gap-1.5">
      ${tags.map(tag => `
        <span class="px-2 py-0.5 bg-slate-100 dark:bg-slate-700/50 text-slate-500 dark:text-slate-400 rounded text-xs">
          #${tag}
        </span>
      `).join('')}
    </div>
  `;
}

// ============================================================================
// Accordion Behavior
// ============================================================================

function attachAccordionListeners() {
  const triggers = elements.faqContainer.querySelectorAll('.accordion-trigger');

  triggers.forEach(trigger => {
    trigger.addEventListener('click', handleAccordionClick);
    trigger.addEventListener('keydown', handleAccordionKeydown);
  });
}

function handleAccordionClick(e) {
  const item = e.currentTarget.closest('.accordion-item');
  if (!item) return;

  const id = item.dataset.id;
  toggleAccordion(id, item);
}

function handleAccordionKeydown(e) {
  if (e.key === 'Enter' || e.key === ' ') {
    e.preventDefault();
    handleAccordionClick(e);
  }
}

function toggleAccordion(id, item) {
  const isOpen = state.openAccordions.has(id);
  const content = item.querySelector('.accordion-content');
  const icon = item.querySelector('.accordion-icon');
  const trigger = item.querySelector('.accordion-trigger');

  if (isOpen) {
    state.openAccordions.delete(id);
    content.classList.remove('open');
    icon.classList.remove('rotate-180');
    trigger.setAttribute('aria-expanded', 'false');
  } else {
    state.openAccordions.add(id);
    content.classList.add('open');
    icon.classList.add('rotate-180');
    trigger.setAttribute('aria-expanded', 'true');
  }
}

// ============================================================================
// Utility Functions
// ============================================================================

function getCategoryName(categoryId) {
  if (!state.faqData) return categoryId;
  const cat = state.faqData.categories.find(c => c.id === categoryId);
  return cat ? cat.name : categoryId;
}

function getCategoryIcon(iconName) {
  const icons = {
    rocket: `<svg class="w-5 h-5 text-emerald-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
            </svg>`,
    cog: `<svg class="w-5 h-5 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/>
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
          </svg>`,
    cloud: `<svg class="w-5 h-5 text-purple-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z"/>
            </svg>`,
    puzzle: `<svg class="w-5 h-5 text-orange-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 4a2 2 0 114 0v1a1 1 0 001 1h3a1 1 0 011 1v3a1 1 0 01-1 1h-1a2 2 0 100 4h1a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 01-1-1v-1a2 2 0 10-4 0v1a1 1 0 01-1 1H7a1 1 0 01-1-1v-3a1 1 0 00-1-1H4a2 2 0 110-4h1a1 1 0 001-1V7a1 1 0 011-1h3a1 1 0 001-1V4z"/>
            </svg>`,
    key: `<svg class="w-5 h-5 text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"/>
          </svg>`,
    wrench: `<svg class="w-5 h-5 text-amber-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/>
            </svg>`,
    layers: `<svg class="w-5 h-5 text-indigo-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"/>
            </svg>`,
    refresh: `<svg class="w-5 h-5 text-cyan-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
            </svg>`,
  };

  return icons[iconName] || icons.cog;
}

function highlightText(text, query) {
  if (!query || query.length < 2) return text;

  try {
    const escapedQuery = query.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
    const regex = new RegExp(`(${escapedQuery})`, 'gi');
    return text.replace(regex, '<mark class="highlight">$1</mark>');
  } catch (e) {
    return text;
  }
}

// ============================================================================
// Initialization
// ============================================================================

function initElements() {
  elements.faqContainer = document.getElementById('faq-container');
  elements.searchInput = document.getElementById('search-input');
  elements.clearSearch = document.getElementById('clear-search');
  elements.searchStats = document.getElementById('search-stats');
  elements.resultCount = document.getElementById('result-count');
  elements.categoryFilters = document.getElementById('category-filters');
  elements.noResults = document.getElementById('no-results');
  elements.loading = document.getElementById('loading');
  elements.themeToggle = document.getElementById('theme-toggle');
  elements.resetSearch = document.getElementById('reset-search');
}

function init() {
  initElements();
  initTheme();
  initSearch();

  // Theme toggle
  if (elements.themeToggle) {
    elements.themeToggle.addEventListener('click', toggleTheme);
  }

  // System theme change listener
  window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {
    if (!localStorage.getItem('sindri-faq-theme')) {
      document.documentElement.classList.toggle('dark', e.matches);
    }
  });

  // Load FAQ data
  loadFaqData();
}

// Start the app
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', init);
} else {
  init();
}

</script>
</body>
</html>
