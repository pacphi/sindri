---
# Sindri v3 Configuration - Docker Fullstack
# Full local development with structured image configuration
version: "3.0"
name: sindri-v3-docker-fullstack

deployment:
  provider: docker
  # v3 structured image_config with semver resolution
  image_config:
    registry: ghcr.io/pacphi/sindri
    version: "^3.0.0"              # Resolves to latest 3.x.x
    resolution_strategy: semver    # semver | latest_stable | pin_to_cli | explicit
    verify_signature: true         # Cosign signature verification
    verify_provenance: true        # SLSA provenance attestation
    pull_policy: IfNotPresent      # Always | IfNotPresent | Never
  resources:
    memory: 4GB
    cpus: 4
  volumes:
    workspace:
      path: /alt/home/developer/workspace
      size: 20GB

extensions:
  profile: fullstack
  autoInstall: true

providers:
  docker:
    network: bridge
    restart: unless-stopped
