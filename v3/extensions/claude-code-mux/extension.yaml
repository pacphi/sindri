---
metadata:
  name: claude-code-mux
  version: 1.0.0
  description: High-performance AI routing proxy with automatic failover across 18+ providers (Anthropic, OpenAI, Gemini, etc.)
  category: claude
  author: 9j
  homepage: https://github.com/9j/claude-code-mux
  dependencies: []
requirements:
  domains:
    - github.com
    - api.anthropic.com
    - api.openai.com
    - generativelanguage.googleapis.com
  diskSpace: 20
  memory: 256
  installTime: 30
install:
  method: script
  script:
    path: install.sh
    timeout: 300
configure:
  templates:
    - source: ccmctl.sh
      destination: ~/bin/ccmctl
      mode: overwrite
    - source: quickstart.sh
      destination: ~/bin/ccm-quickstart
      mode: overwrite
    - source: ccm-config.toml.template
      destination: ~/config/ccm-config.toml
      mode: overwrite
  environment:
    - key: ANTHROPIC_BASE_URL
      value: "http://127.0.0.1:13456"
      scope: bashrc
    - key: ANTHROPIC_API_KEY
      value: "ccm-proxy"
      scope: bashrc
    - key: PATH
      value: "${WORKSPACE:-${HOME}/workspace}/bin:$PATH"
      scope: bashrc
validate:
  commands:
    - name: ccm
      versionFlag: --version
      expectedPattern: "ccm \\d+\\.\\d+\\.\\d+"
remove:
  paths:
    - ~/bin/ccm
    - ~/bin/ccmctl
    - ~/bin/ccm-quickstart
    - ~/config/ccm-config.toml
    - ~/.claude-code-mux
  confirmation: true
upgrade:
  strategy: manual
  script:
    path: upgrade.sh
    timeout: 300
bom:
  tools:
    - name: claude-code-mux
      version: dynamic  # GitHub release (gets latest)
      source: binary
      type: cli-tool
      license: MIT
      homepage: https://github.com/9j/claude-code-mux
      purl: pkg:github/9j/claude-code-mux
      cpe: cpe:2.3:a:9j:claude-code-mux:*:*:*:*:*:*:*:*
  files:
    - path: ~/bin/ccm
      type: binary
    - path: ~/bin/ccmctl
      type: script
    - path: ~/bin/ccm-quickstart
      type: script
    - path: ~/config/ccm-config.toml
      type: config
docs:
  title: "Claude Code Mux"
  overview: |
    High-performance AI routing proxy with automatic failover across 18+ providers (Anthropic, OpenAI, Gemini, etc.). Provides intelligent model routing and redundancy.
  last-updated: "2026-01-26"
  features:
    - "18+ Provider Support - Route to any major AI provider"
    - "Automatic Failover - Seamless switching on errors"
    - "Load Balancing - Distribute requests across providers"
    - "Cost Optimization - Route based on pricing"
    - "Latency Optimization - Route to fastest provider"
  usage:
    - section: "Starting the Proxy"
      examples:
        - description: "Quick start"
          code: "ccm-quickstart"
        - description: "Manual start"
          code: "ccm start"
        - description: "With specific config"
          code: "ccm start --config ~/config/ccm-config.toml"
    - section: "Control Commands"
      examples:
        - description: "Check status"
          code: "ccmctl status"
        - description: "View active providers"
          code: "ccmctl providers"
        - description: "Switch primary provider"
          code: "ccmctl switch openai"
        - description: "View metrics"
          code: "ccmctl metrics"
    - section: "Configuration"
      examples:
        - description: "Example ccm-config.toml"
          code: |
            [proxy]
            listen = "127.0.0.1:13456"

            [providers.anthropic]
            enabled = true
            api_key_env = "ANTHROPIC_API_KEY"
            priority = 1

            [providers.openai]
            enabled = true
            api_key_env = "OPENAI_API_KEY"
            priority = 2

            [providers.google]
            enabled = true
            api_key_env = "GOOGLE_API_KEY"
            priority = 3

            [failover]
            enabled = true
            max_retries = 3
            backoff_ms = 1000

            [load_balancing]
            strategy = "round-robin"
    - section: "Using with Claude Code"
      examples:
        - description: "Start the proxy and Claude Code automatically uses it"
          code: |
            ccm start

            # Claude Code automatically uses the proxy via env vars
            # ANTHROPIC_BASE_URL=http://127.0.0.1:13456
            # ANTHROPIC_API_KEY=ccm-proxy
  related:
    - name: claudish
      description: "Alternative OpenRouter proxy"
