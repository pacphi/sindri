---
metadata:
  name: claude-marketplace
  version: 2.0.0
  description: Claude Code plugin marketplace integration via YAML configuration
  category: claude
  author: Sindri Team
  dependencies: []
requirements:
  domains:
    - schemastore.org
  diskSpace: 50
  memory: 0
  installTime: 30
  # Claude CLI may be slow to respond on first run
  validationTimeout: 30
install:
  method: script
  script:
    path: install.sh
    timeout: 300
configure:
  templates:
    # Local environment gets full marketplace list (9 marketplaces)
    - source: marketplaces.yml.example
      destination: ~/config/marketplaces.yml
      mode: overwrite
      condition:
        env:
          not_any:
            - CI: "true"
            - GITHUB_ACTIONS: "true"

    # CI environment gets minimal marketplace list (3 marketplaces)
    - source: marketplaces.ci.yml.example
      destination: ~/config/marketplaces.yml
      mode: overwrite
      condition:
        env:
          any:
            - CI: "true"
            - GITHUB_ACTIONS: "true"

    # Claude settings.json merged in all environments
    - source: default-settings.json
      destination: ~/.claude/settings.json
      mode: merge
      condition: null  # Always process
validate:
  commands:
    - name: claude
      expectedPattern: "\\d+\\.\\d+\\.\\d+.*Claude Code"
remove:
  paths:
    - ~/config/marketplaces.yml
upgrade:
  strategy: none
bom:
  tools:
    - name: claude-code
      version: dynamic
      source: binary
      type: cli-tool
      license: Proprietary
      homepage: https://claude.ai/code
