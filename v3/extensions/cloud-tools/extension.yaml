---
metadata:
  name: cloud-tools
  version: 2.0.0
  description: Cloud provider CLI tools (AWS, Azure, GCP, Fly.io, OCI, Alibaba, DO, IBM)
  category: devops
  author: Sindri Team
  dependencies:
    - python  # Required for Azure CLI (pip install azure-cli)
requirements:
  domains:
    - amazonaws.com
    - awscli.amazonaws.com
    - pypi.org
    - files.pythonhosted.org
    - google.com
    - dl.google.com
    - fly.io
    - github.com
    - api.github.com
    - raw.githubusercontent.com
    - alicdn.com
    - aliyuncli.alicdn.com
    - ibm.com
    - clis.cloud.ibm.com
    - download.clis.cloud.ibm.com
  diskSpace: 2500
  memory: 256
  installTime: 180
  secrets:
    - aws_access_key_id
    - aws_secret_access_key
    - aws_session_token
    - azure_client_id
    - azure_client_secret
    - azure_tenant_id
    - fly_api_token
install:
  method: script
  script:
    path: install.sh
    timeout: 900
configure:
  templates:
    - source: ssh-environment.template
      destination: ~/.profile
      mode: append
    - source: bashrc.template
      destination: ~/.bashrc
      mode: append
    - source: readme.template
      destination: ~/extensions/cloud/README.md
      mode: overwrite
validate:
  commands:
    - name: aws
      expectedPattern: "aws-cli"
    - name: az
    - name: gcloud
    - name: flyctl
      expectedPattern: "flyctl"
  # Note: Optional tools (oci, aliyun, doctl, ibmcloud) are skipped in CI mode
  # and cannot be validated universally. They install successfully and are
  # fully functional when installed, but validation would break CI builds.
capabilities:
  hooks:
    post_install:
      command: "ln -sf $HOME/google-cloud-sdk/bin/gcloud $HOME/.local/bin/gcloud 2>/dev/null || true"
      description: "Symlink gcloud to .local/bin for validation"
remove:
  paths:
    - /usr/local/aws-cli
    - /usr/local/bin/aws
    - /usr/local/bin/aws_completer
    - /usr/local/bin/aliyun
    - ~/extensions/cloud
    - /usr/local/bin/doctl
    - /usr/local/ibmcloud
    - /usr/local/bin/ibmcloud
    - ~/.fly
    - ~/extensions/cloud
upgrade:
  strategy: manual
  script:
    path: upgrade.sh
    timeout: 900
bom:
  # NOTE: Versions researched 2026-02-09
  # Install script uses upstream installers - versions reflect latest available
  tools:
    - name: aws
      version: 2.27.41
      source: script
      type: cli-tool
      license: Apache-2.0
      homepage: https://aws.amazon.com/cli
      purl: pkg:generic/awscli@2.27.41
      cpe: cpe:2.3:a:amazon:aws_cli:2.27.41:*:*:*:*:*:*:*
    - name: az
      version: 2.83.0
      source: script
      type: cli-tool
      license: MIT
      homepage: https://docs.microsoft.com/en-us/cli/azure
      purl: pkg:pypi/azure-cli@2.83.0
      cpe: cpe:2.3:a:microsoft:azure_cli:2.83.0:*:*:*:*:*:*:*
    - name: gcloud
      version: 555.0.0
      source: script
      type: cli-tool
      license: Apache-2.0
      homepage: https://cloud.google.com/sdk/gcloud
      purl: pkg:generic/google-cloud-sdk@555.0.0
    - name: aliyun
      version: 3.2.9
      source: script
      type: cli-tool
      license: Apache-2.0
      homepage: https://www.alibabacloud.com/help/cli
      purl: pkg:github/aliyun/aliyun-cli@3.2.9
    - name: doctl
      version: 1.148.0
      source: script
      type: cli-tool
      license: Apache-2.0
      homepage: https://docs.digitalocean.com/reference/doctl
      purl: pkg:github/digitalocean/doctl@1.148.0
    - name: flyctl
      version: 0.4.7
      source: script
      type: cli-tool
      license: Apache-2.0
      homepage: https://fly.io/docs/flyctl
      purl: pkg:github/superfly/flyctl@0.4.7
    - name: ibmcloud
      version: 2.41.0
      source: script
      type: cli-tool
      license: Apache-2.0
      homepage: https://cloud.ibm.com/docs/cli
      purl: pkg:generic/ibm-cloud-cli@2.41.0
docs:
  title: "Cloud Tools"
  overview: |
    Cloud provider CLI tools for AWS, Azure, GCP, Fly.io, OCI, Alibaba Cloud, DigitalOcean, and IBM Cloud. Provides unified access to major cloud platforms.
  last-updated: "2026-01-29"
  usage:
    - section: "AWS CLI"
      examples:
        - code: |
            # Configure credentials
            aws configure

            # List S3 buckets
            aws s3 ls

            # Deploy with CloudFormation
            aws cloudformation deploy --template-file template.yaml --stack-name my-stack

            # ECS task operations
            aws ecs list-tasks --cluster my-cluster
    - section: "Azure CLI"
      examples:
        - code: |
            # Login
            az login

            # List resource groups
            az group list

            # Create a web app
            az webapp create --name myapp --resource-group mygroup --plan myplan

            # AKS cluster operations
            az aks get-credentials --resource-group mygroup --name mycluster
    - section: "Google Cloud"
      examples:
        - code: |
            # Authenticate
            gcloud auth login

            # Set project
            gcloud config set project my-project

            # List compute instances
            gcloud compute instances list

            # Deploy to App Engine
            gcloud app deploy
    - section: "Fly.io"
      examples:
        - code: |
            # Login
            flyctl auth login

            # Launch an app
            flyctl launch

            # Deploy
            flyctl deploy

            # Check status
            flyctl status
    - section: "DigitalOcean"
      examples:
        - code: |
            # Authenticate
            doctl auth init

            # List droplets
            doctl compute droplet list

            # Create a droplet
            doctl compute droplet create myserver --region nyc1 --image ubuntu-22-04-x64 --size s-1vcpu-1gb
    - section: "Alibaba Cloud"
      examples:
        - code: |
            # Configure
            aliyun configure

            # List ECS instances
            aliyun ecs DescribeInstances

            # List OSS buckets
            aliyun oss ls
    - section: "IBM Cloud"
      examples:
        - code: |
            # Login
            ibmcloud login

            # List resources
            ibmcloud resource service-instances

            # Kubernetes operations
            ibmcloud ks cluster ls
  related:
    - name: infra-tools
      description: "Infrastructure tools (Terraform, K8s)"
