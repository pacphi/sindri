---
metadata:
  name: infra-tools
  version: 2.1.0
  description: Infrastructure and DevOps tooling (Terraform, K8s, Config Mgmt)
  category: devops
  author: Sindri Team
  homepage: https://sindri.dev
  dependencies: []
requirements:
  domains:
    - releases.hashicorp.com
    - apt.releases.hashicorp.com
    - dl.k8s.io
    - get.helm.sh
    - raw.githubusercontent.com
    - github.com
    - api.github.com
    - carvel.dev
    - pulumi.com
    - www.pulumi.com
  diskSpace: 2500
  memory: 256
  installTime: 120
install:
  method: hybrid
  mise:
    configFile: mise.toml
    reshimAfterInstall: true
  apt:
    updateFirst: true
    packages:
      - ansible
      - ansible-lint
      - jq
      - curl
      - wget
  script:
    path: install-additional.sh
    timeout: 600
    args: []
configure:
  templates:
    - source: infra-tools.bashrc.template
      destination: ~/.bashrc.d/infra-tools.sh
      mode: overwrite
    - source: infra-tools.readme.template
      destination: ~/infrastructure/README.md
      mode: overwrite
  environment:
    - key: KUBECONFIG
      value: "$HOME/.kube/config"
      scope: bashrc
    - key: ANSIBLE_HOST_KEY_CHECKING
      value: "False"
      scope: bashrc
validate:
  commands:
    - name: terraform
      versionFlag: "version"
      expectedPattern: "Terraform v\\d+\\.\\d+\\.\\d+"
    - name: ansible
      versionFlag: "--version"
      expectedPattern: "ansible \\[core \\d+\\.\\d+\\.\\d+\\]"
    - name: kubectl
      versionFlag: "version --client"
      expectedPattern: "Client Version"
    - name: helm
      versionFlag: "version --short"
      expectedPattern: "v\\d+\\.\\d+\\.\\d+"
    - name: packer
      versionFlag: "version"
      expectedPattern: "Packer v\\d+\\.\\d+\\.\\d+"
    - name: kustomize
      versionFlag: "version"
      expectedPattern: "v\\d+\\.\\d+\\.\\d+"
  mise:
    tools: ["terraform", "kubectl", "helm", "packer", "asdf:looztra/asdf-k9s", "asdf:Banno/asdf-kustomize", "asdf:sudermanjr/asdf-yq"]
    minToolCount: 7
remove:
  confirmation: true
  mise:
    removeConfig: true
    tools:
      - terraform
      - kubectl
      - helm
      - packer
      - "asdf:looztra/asdf-k9s"
      - "asdf:Banno/asdf-kustomize"
      - "asdf:sudermanjr/asdf-yq"
  apt:
    packages:
      - ansible
      - ansible-lint
  paths:
    - ~/.bashrc.d/infra-tools.sh
    - ~/infrastructure
    - /usr/local/bin/pulumi
    - /usr/local/bin/crossplane
    - /usr/local/bin/kubectx
    - /usr/local/bin/kubens
    - /usr/local/bin/kapp
    - /usr/local/bin/ytt
    - /usr/local/bin/kbld
    - /usr/local/bin/vendir
    - /usr/local/bin/imgpkg
upgrade:
  strategy: automatic
  mise:
    upgradeAll: true
  apt:
    packages: ["ansible", "ansible-lint"]
    updateFirst: true
bom:
  tools:
    - name: terraform
      version: "1.14"
      source: mise
      type: cli-tool
      license: BUSL-1.1
      homepage: https://www.terraform.io
      purl: pkg:generic/terraform
      cpe: cpe:2.3:a:hashicorp:terraform:*:*:*:*:*:*:*:*
    - name: kubectl
      version: "1.35"
      source: mise
      type: cli-tool
      license: Apache-2.0
      homepage: https://kubernetes.io
      purl: pkg:generic/kubectl
    - name: helm
      version: "4.1"
      source: mise
      type: cli-tool
      license: Apache-2.0
      homepage: https://helm.sh
      purl: pkg:generic/helm
    - name: k9s
      version: "0.50"
      source: mise
      type: cli-tool
      license: Apache-2.0
      homepage: https://k9scli.io
      purl: pkg:github/derailed/k9s
    - name: ansible
      version: "13.3.0"
      source: apt
      type: cli-tool
      license: GPL-3.0
      homepage: https://www.ansible.com
      purl: pkg:deb/ubuntu/ansible
      cpe: cpe:2.3:a:ansible:ansible:*:*:*:*:*:*:*:*
    - name: pulumi
      version: "3.220.0"
      source: script
      type: cli-tool
      license: Apache-2.0
      homepage: https://www.pulumi.com
      purl: pkg:generic/pulumi
    - name: crossplane
      version: "2.1.4"
      source: script
      type: cli-tool
      license: Apache-2.0
      homepage: https://www.crossplane.io
      purl: pkg:generic/crossplane
    - name: kubectx
      version: "0.9.5"
      source: script
      type: cli-tool
      license: Apache-2.0
      homepage: https://github.com/ahmetb/kubectx
      purl: pkg:github/ahmetb/kubectx@0.9.5
    - name: kubens
      version: "0.9.5"
      source: script
      type: cli-tool
      license: Apache-2.0
      homepage: https://github.com/ahmetb/kubectx
      purl: pkg:github/ahmetb/kubectx@0.9.5
    - name: kapp
      version: "0.65.0"
      source: script
      type: cli-tool
      license: Apache-2.0
      homepage: https://carvel.dev/kapp
      purl: pkg:github/carvel-dev/kapp@0.65.0
    - name: ytt
      version: "0.53.0"
      source: script
      type: cli-tool
      license: Apache-2.0
      homepage: https://carvel.dev/ytt
      purl: pkg:github/carvel-dev/ytt@0.53.0
    - name: kbld
      version: "0.47.1"
      source: script
      type: cli-tool
      license: Apache-2.0
      homepage: https://carvel.dev/kbld
      purl: pkg:github/carvel-dev/kbld@0.47.1
    - name: vendir
      version: "0.45.1"
      source: script
      type: cli-tool
      license: Apache-2.0
      homepage: https://carvel.dev/vendir
      purl: pkg:github/carvel-dev/vendir@0.45.1
    - name: imgpkg
      version: "0.47.1"
      source: script
      type: cli-tool
      license: Apache-2.0
      homepage: https://carvel.dev/imgpkg
      purl: pkg:github/carvel-dev/imgpkg@0.47.1
docs:
  title: "Infrastructure Tools"
  overview: |
    Infrastructure and DevOps tooling including Terraform, Kubernetes tools, and Configuration Management. Comprehensive IaC toolkit.
  last-updated: "2026-01-26"
  usage:
    - section: "Terraform"
      examples:
        - code: |
            # Initialize
            terraform init

            # Plan changes
            terraform plan

            # Apply changes
            terraform apply

            # Destroy infrastructure
            terraform destroy

            # Format code
            terraform fmt
    - section: "Kubernetes (kubectl)"
      examples:
        - code: |
            # Get resources
            kubectl get pods
            kubectl get services
            kubectl get deployments

            # Apply manifests
            kubectl apply -f deployment.yaml

            # Logs and exec
            kubectl logs pod-name
            kubectl exec -it pod-name -- bash

            # Context management
            kubectx my-cluster
            kubens my-namespace
    - section: "Helm"
      examples:
        - code: |
            # Add repository
            helm repo add bitnami https://charts.bitnami.com/bitnami

            # Search charts
            helm search repo nginx

            # Install a chart
            helm install my-release bitnami/nginx

            # Upgrade
            helm upgrade my-release bitnami/nginx

            # List releases
            helm list
    - section: "K9s"
      examples:
        - code: |
            # Launch TUI
            k9s

            # With specific context
            k9s --context my-cluster

            # With namespace filter
            k9s -n my-namespace
    - section: "Ansible"
      examples:
        - code: |
            # Run playbook
            ansible-playbook playbook.yml

            # Inventory check
            ansible-inventory --list

            # Ad-hoc commands
            ansible all -m ping

            # Lint playbook
            ansible-lint playbook.yml
    - section: "Pulumi"
      examples:
        - code: |
            # Create project
            pulumi new aws-python

            # Preview changes
            pulumi preview

            # Deploy
            pulumi up

            # Destroy
            pulumi destroy
    - section: "Carvel Tools"
      examples:
        - code: |
            # ytt - Template YAML
            ytt -f config/ -f values.yaml

            # kapp - Deploy application
            kapp deploy -a my-app -f config/

            # kbld - Build images
            kbld -f config/

            # vendir - Sync dependencies
            vendir sync
  related:
    - name: cloud-tools
      description: "Cloud provider CLIs"
    - name: docker
      description: "Container runtime"
