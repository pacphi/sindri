---
metadata:
  name: nodejs
  version: 1.1.0
  description: Node.js LTS via mise with pnpm package manager (corepack)
  category: languages
  dependencies:
    - mise-config
requirements:
  domains:
    - registry.npmjs.org
    - nodejs.org
  diskSpace: 300
  memory: 256
  installTime: 30
install:
  method: mise
  mise:
    configFile: mise.toml
    reshimAfterInstall: true
configure:
  environment:
    - key: NODE_ENV
      value: development
      scope: bashrc
    # Use mise Python for node-gyp native module compilation
    # mise Python includes development headers needed for compiling native modules (sharp, etc.)
    # If python extension isn't installed, falls back to system python
    - key: PYTHON
      value: $(mise where python)/bin/python3
      scope: bashrc
validate:
  commands:
    - name: node
      expectedPattern: "v\\d+\\.\\d+\\.\\d+"
    - name: npm
  # pnpm managed by corepack - available on-demand after first use
  # Skipping validation since it requires sourcing bashrc first
remove:
  mise:
    removeConfig: true
    tools: [nodejs]
bom:
  tools:
    - name: node
      version: lts
      source: mise
      type: runtime
      license: MIT
      homepage: https://nodejs.org
      purl: pkg:generic/nodejs
    - name: npm
      version: "11.x"
      source: mise
      type: package-manager
      license: Artistic-2.0
      homepage: https://www.npmjs.com
      purl: pkg:npm/npm
    - name: npx
      version: "11.x"  # Part of npm package
      source: mise
      type: cli-tool
      license: Artistic-2.0
      homepage: https://www.npmjs.com
      purl: pkg:npm/npx
    - name: pnpm
      version: "10.x"  # Managed by corepack (bundled with Node.js)
      source: mise
      type: package-manager
      license: MIT
      homepage: https://pnpm.io
      purl: pkg:npm/pnpm
docs:
  title: "Node.js"
  overview: |
    Node.js LTS via mise with pnpm package manager (via corepack). Provides a complete Node.js development environment with modern package management.
  last-updated: "2026-01-26"
  usage:
    - section: "Running Node.js"
      examples:
        - description: "Check version"
          code: |
            node --version
        - description: "Run a JavaScript file"
          code: |
            node app.js
        - description: "Start a REPL"
          code: |
            node
    - section: "Package Management with pnpm"
      examples:
        - description: "Install dependencies"
          code: |
            pnpm install
        - description: "Add a package"
          code: |
            pnpm add express
        - description: "Run scripts"
          code: |
            pnpm run build
            pnpm run test
    - section: "Using npx"
      examples:
        - description: "Run a package without installing"
          code: |
            npx create-react-app my-app
            npx eslint .
  related:
    - name: nodejs-devtools
      description: "TypeScript, ESLint, Prettier for Node.js"
    - name: mise-config
      description: "Required mise configuration"
